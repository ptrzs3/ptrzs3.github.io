<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  Git基础 · Galaxy
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="author" content="ptrzs">
<meta name="description" content="介绍关于Git的基础知识和用法">
<meta name="keywords" content="blog,developer,personal">

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Git基础"/>
<meta name="twitter:description" content="介绍关于Git的基础知识和用法"/>

<meta property="og:title" content="Git基础" />
<meta property="og:description" content="介绍关于Git的基础知识和用法" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://ptrzs3.github.io/posts/git/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-13T20:52:20+08:00" />
<meta property="article:modified_time" content="2023-10-13T20:52:20+08:00" />




<link rel="canonical" href="https://ptrzs3.github.io/posts/git/">


<link rel="preload" href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.135e22c97ff685fe983fc60048e309ced8f00d8d38f536aa67dba8a13a03dfa4.css" integrity="sha256-E14iyX/2hf6YP8YASOMJztjwDY049TaqZ9uooToD36Q=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css" integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/svg+xml" href="/img/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon.ico" sizes="32x32">
<link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv">👁<span id="busuanzi_value_site_pv"></span></span>
</head>






<body class="preload-transitions colorscheme-dark">
  

  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="/">
      Galaxy
    </a>
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link" href="/posts/">Blog</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/disco/">Disco</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link" href="/about/">About</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="https://ptrzs3.github.io/posts/git/">
              Git基础
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa fa-calendar" aria-hidden="true"></i>
              <time datetime="2023-10-13T20:52:20&#43;08:00">
                October 13, 2023
              </time>
            </span>
            <span class="reading-time">
              <i class="fa fa-clock-o" aria-hidden="true"></i>
              2-minute read
            </span>
          </div>
          <div class="authors">
  <i class="fa fa-user" aria-hidden="true"></i>
    <a href="/authors/ptrzs/">ptrzs</a></div>

          
          <div class="tags">
  <i class="fa fa-tag" aria-hidden="true"></i>
    <span class="tag">
      <a href="/tags/git/">git</a>
    </span></div>

        </div>
      </header>

      <div class="post-content">
        
        <h1 id="git">
  Git
  <a class="heading-link" href="#git">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h1>
<h2 id="git的配置信息">
  Git的配置信息
  <a class="heading-link" href="#git%e7%9a%84%e9%85%8d%e7%bd%ae%e4%bf%a1%e6%81%af">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<p>使用<code>git config</code>命令对Git做一些配置。</p>
<h3 id="git的配置文件等级">
  Git的配置文件等级
  <a class="heading-link" href="#git%e7%9a%84%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e7%ad%89%e7%ba%a7">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Git的配置文件有三个，分别对应不同的影响等级：</p>
<ul>
<li>
<p>Linux下</p>
<ul>
<li>
<p><code>/etc/gitconfig</code>：包含系统上每个用户及他们仓库的通用配置，使用<code>git config --system</code>更改</p>
</li>
<li>
<p><code>~/.gitconfig</code> 或 <code>~/.config/git/config</code>：针对当前用户的配置文件，使用<code>git config --global</code>修改</p>
</li>
<li>
<p><code>.git/config</code>：针对当前仓库的配置文件，使用<code>git config</code>修改</p>
</li>
</ul>
</li>
<li>
<p>Windows下</p>
<ul>
<li><code>$Git/etc/gitconfig</code></li>
<li><code>$HOME/.gitconfig</code></li>
<li><code>.git/config</code></li>
</ul>
</li>
</ul>
<p>读取配置时优先读取当前仓库的配置，如果没有就往上找</p>
<h3 id="修改git配置">
  修改Git配置
  <a class="heading-link" href="#%e4%bf%ae%e6%94%b9git%e9%85%8d%e7%bd%ae">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ul>
<li>修改全局配置：<code>git config --global user.name &quot;zhangsan&quot;</code></li>
</ul>
<h3 id="查看当前的git配置">
  查看当前的Git配置
  <a class="heading-link" href="#%e6%9f%a5%e7%9c%8b%e5%bd%93%e5%89%8d%e7%9a%84git%e9%85%8d%e7%bd%ae">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p><code>git config --list</code></p>
<h2 id="git基础">
  Git基础
  <a class="heading-link" href="#git%e5%9f%ba%e7%a1%80">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h2>
<h3 id="初始化git仓库">
  初始化Git仓库
  <a class="heading-link" href="#%e5%88%9d%e5%a7%8b%e5%8c%96git%e4%bb%93%e5%ba%93">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>将当前目录初始化为Git仓库：<code>git init</code></p>
<p>如果当前目录中已经有一些文件存在，使用<code>git add &lt;filename&gt;</code>来跟踪某个文件即将其提交到暂存区，或者<code>git add .</code>跟踪当前目录所有文件并提交到暂存区</p>
<h3 id="克隆已有的仓库">
  克隆已有的仓库
  <a class="heading-link" href="#%e5%85%8b%e9%9a%86%e5%b7%b2%e6%9c%89%e7%9a%84%e4%bb%93%e5%ba%93">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>克隆github上某个仓库：<code>git clone &lt;url&gt;</code></p>
<p><code>git commit -a</code>提交所有已修改的文件，不管有没有在暂存区</p>
<h3 id="从git中移除文件">
  从git中移除文件
  <a class="heading-link" href="#%e4%bb%8egit%e4%b8%ad%e7%a7%bb%e9%99%a4%e6%96%87%e4%bb%b6">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p><code>git rm $FILENAME</code>：要求文件当前没有被暂存，如果被暂存需要添加<code>-f</code>选项，这样强制删除后无法被Git恢复。也可以添加<code>--chached</code>选项直接从暂存区移除（不会从磁盘上移除），移除后是<code>untracked</code>状态</p>
<h3 id="比较差异">
  比较差异
  <a class="heading-link" href="#%e6%af%94%e8%be%83%e5%b7%ae%e5%bc%82">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>文件已修改且未提交到暂存区，与修改前作对比：<code>git diff &lt;filename&gt;</code></p>
<p>文件已提交到暂存区，与上次提交作对比：<code>git diff --cached</code> or <code>git diff --staged</code></p>
<h3 id="移动文件">
  移动文件
  <a class="heading-link" href="#%e7%a7%bb%e5%8a%a8%e6%96%87%e4%bb%b6">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p><code>git mv &lt;src&gt; &lt;dst&gt;</code></p>
<p>运行一次<code>git mv</code>命令相当于</p>
<ul>
<li><code>mv &lt;src&gt; &lt;dst&gt;</code></li>
<li><code>git rm &lt;src&gt;</code></li>
<li><code>git add &lt;dst&gt;</code></li>
</ul>
<h3 id="查看提交历史">
  查看提交历史
  <a class="heading-link" href="#%e6%9f%a5%e7%9c%8b%e6%8f%90%e4%ba%a4%e5%8e%86%e5%8f%b2">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p><code>git log [option]</code></p>
<p>option</p>
<ul>
<li>
<p><code>-p</code> ：显示每次提交的diff</p>
</li>
<li>
<p><code>-n</code>：显示最近n次提交log</p>
</li>
<li>
<p><code>--oneline</code>：只显示每次提交的SHA-1和提交信息</p>
</li>
</ul>
<h3 id="提交参数">
  提交参数
  <a class="heading-link" href="#%e6%8f%90%e4%ba%a4%e5%8f%82%e6%95%b0">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p><code>git commit --amend</code>：提交暂存区修改，并将上次提交与本次提交合并</p>
<h3 id="取消暂存">
  取消暂存
  <a class="heading-link" href="#%e5%8f%96%e6%b6%88%e6%9a%82%e5%ad%98">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p><code>git reset HEAD &lt;filename&gt;</code>：撤销对某文件的暂存操作，变为已修改未暂存状态</p>
<h3 id="恢复到上次提交的状态">
  恢复到上次提交的状态
  <a class="heading-link" href="#%e6%81%a2%e5%a4%8d%e5%88%b0%e4%b8%8a%e6%ac%a1%e6%8f%90%e4%ba%a4%e7%9a%84%e7%8a%b6%e6%80%81">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p><code>git checkout -- &lt;filename&gt;</code> or <code>git restore &lt;filename&gt;</code>：丢弃所有修改，将文件恢复到暂存区的状态（如果已暂存未提交），否则恢复到上次提交的状态</p>
<h3 id="git别名">
  Git别名
  <a class="heading-link" href="#git%e5%88%ab%e5%90%8d">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p><code>git config --global alias.co checkout</code></p>
<p>git别名只是简单的文本替换</p>
<h3 id="git分支">
  Git分支
  <a class="heading-link" href="#git%e5%88%86%e6%94%af">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>​	Git 和其它版本控制系统（包括 Subversion 和近似工具）的主要差别在于 Git 对待数据的方法。概念上来区分，其它大部分系统以文件变更列表的方式存储信息。 这类系统（CVS、Subversion、Perforce、Bazaar 等等）将它们保存的信息看作是一组基本文件和每个文件随时间逐步累积的差异。</p>
<p>​		每次提交更新，Git都会保存所有被跟踪文件的快照并将快照索引保存在本次提交创建的<code>提交对象</code>中，而不是记录本次修改与上次的差异。<code>提交对象</code>保存了快照索引、提交信息、父对象等信息。<code>git init</code>后会自动创建一个<code>master</code>分支，每次<code>commit</code>后会创建新的提交对象，<code>master</code>自动向前移动。</p>
<p><img src="https://www.progit.cn/images/basic-branching-1.png" alt="一个简单的提交历史。"></p>
<p>​		新建分支实质上是创建一个指向当前分支的最后一个提交对象的指针（Git通过一个HEAD指针记录当前所在的分支，并指向最后一次提交的快照，当切换分支时，HEAD指针也随之变动），由于 Git 的分支实质上仅是包含所指对象校验和（长度为 40 的 SHA-1 值字符串）的文件，所以它的创建和销毁都异常高效。，创建一个新分支就相当于往一个文件中写入 41 个字节（40 个字符和 1 个换行符）</p>
<h4 id="git创建分支">
  Git创建分支
  <a class="heading-link" href="#git%e5%88%9b%e5%bb%ba%e5%88%86%e6%94%af">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p><code>git branch &lt;branch_name&gt;</code></p>
<p>下图展示了执行<code>git branch testing</code>创建<code>testing</code>分支的结果。</p>
<p><img src="https://www.progit.cn/images/head-to-master.png" alt="HEAD 指向当前所在的分支。"></p>
<h4 id="git删除分支">
  Git删除分支
  <a class="heading-link" href="#git%e5%88%a0%e9%99%a4%e5%88%86%e6%94%af">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p><code>git branch -d &lt;branch_name&gt;</code>如果该分支没有被合并则删除失败，使用<code>-D</code>强制删除</p>
<h4 id="git切换分支">
  Git切换分支
  <a class="heading-link" href="#git%e5%88%87%e6%8d%a2%e5%88%86%e6%94%af">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p><code>git checkout [option] &lt;branch_name&gt;</code></p>
<p>option</p>
<ul>
<li><code>-b</code>：创建分支后切换到该分支</li>
</ul>
<h4 id="git合并分支">
  Git合并分支
  <a class="heading-link" href="#git%e5%90%88%e5%b9%b6%e5%88%86%e6%94%af">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p>将两个分支合并会产生一个新的提交对象。</p>
<p><code>git merge &lt;branch_name&gt;</code>：将<code>brance name</code>合并到当前分支，如果没有文件冲突发生，则合并完成；如果发生文件冲突，Git会提示合并未完成，使用<code>git st</code>命令查看未merge的文件并手动修改，未merge的文件分为上下两部分，用<code>======</code>分割，手动选择要保存的内容并删除<code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>、<code>=======</code>、<code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>后执行<code>git add &lt;filename&gt;</code>和<code>git commit</code>后自动完成合并</p>
<p><code>git branch --merged</code>：查看已合并到当前分支的分支</p>
<p><code>git branch --no-merged</code>：查看所有未合并工作的分支</p>
<p>如果要合并的分支与当前分支在一条大分支上，也就是当前分支落后于要合并的分支，那么只需要将当前分支的指针快进即可。</p>
<p>接下来将<code>iss53</code>分支合并到<code>master</code>分支上：</p>
<p><img src="https://www.progit.cn/images/basic-merging-1.png" alt="一次典型合并中所用到的三个快照。"></p>
<p><code>git checkout master</code></p>
<p><code>git merge iss53</code></p>
<p><img src="https://www.progit.cn/images/basic-merging-2.png" alt="一个合并提交。"></p>
<h4 id="git查看所有分支">
  Git查看所有分支
  <a class="heading-link" href="#git%e6%9f%a5%e7%9c%8b%e6%89%80%e6%9c%89%e5%88%86%e6%94%af">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p><code>git branch [option]</code></p>
<p>option</p>
<ul>
<li><code>-vv</code>：查看详细信息</li>
</ul>
<h3 id="远程仓库">
  远程仓库
  <a class="heading-link" href="#%e8%bf%9c%e7%a8%8b%e4%bb%93%e5%ba%93">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<h4 id="添加远程仓库">
  添加远程仓库
  <a class="heading-link" href="#%e6%b7%bb%e5%8a%a0%e8%bf%9c%e7%a8%8b%e4%bb%93%e5%ba%93">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p><code>git remote add &lt;shortname_for_remote&gt; &lt;remote_url&gt;</code></p>
<h4 id="查看已添加的远程仓库">
  查看已添加的远程仓库
  <a class="heading-link" href="#%e6%9f%a5%e7%9c%8b%e5%b7%b2%e6%b7%bb%e5%8a%a0%e7%9a%84%e8%bf%9c%e7%a8%8b%e4%bb%93%e5%ba%93">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p><code>git remote [option]</code> ：打印所有已添加的远程仓库名称</p>
<p>option:  使用<code>-v</code>选项显示远程仓库的url</p>
<p><code>git remote show &lt;remote_name&gt;</code>：查看某个远程仓库的详细信息</p>
<h4 id="拉取远程仓库的更新">
  拉取远程仓库的更新
  <a class="heading-link" href="#%e6%8b%89%e5%8f%96%e8%bf%9c%e7%a8%8b%e4%bb%93%e5%ba%93%e7%9a%84%e6%9b%b4%e6%96%b0">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p><code>git fetch &lt;remote_name&gt;</code></p>
<p><code>fetch</code>仅拉取远程仓库的更新，不会自动和本地分支合并，需要手动<code>merge</code></p>
<p><code>git pull &lt;remote_name&gt;</code>：拉取远程仓库的更新并与自动本地分支合并</p>
<h4 id="推送到远程仓库">
  推送到远程仓库
  <a class="heading-link" href="#%e6%8e%a8%e9%80%81%e5%88%b0%e8%bf%9c%e7%a8%8b%e4%bb%93%e5%ba%93">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p><code>git push &lt;origin_repo&gt; &lt;local_branch[:remote_branch]&gt;</code></p>
<p>只有当你有所克隆服务器的写入权限，并且之前没有人推送过时，这条命令才能生效。 当你和其他人在同一时间克隆，他们先推送到上游然后你再推送到上游，你的推送就会毫无疑问地被拒绝。 你必须先将他们的工作拉取下来并将其合并进你的工作后才能推送。</p>
<h4 id="删除远程分支">
  删除远程分支
  <a class="heading-link" href="#%e5%88%a0%e9%99%a4%e8%bf%9c%e7%a8%8b%e5%88%86%e6%94%af">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p><code>git push origin --delete &lt;branch_name&gt;</code></p>
<h4 id="远程仓库的重命名与移除">
  远程仓库的重命名与移除
  <a class="heading-link" href="#%e8%bf%9c%e7%a8%8b%e4%bb%93%e5%ba%93%e7%9a%84%e9%87%8d%e5%91%bd%e5%90%8d%e4%b8%8e%e7%a7%bb%e9%99%a4">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h4>
<p><code>git remote rename &lt;src&gt; &lt;dest&gt;</code></p>
<p><code>git remote rm &lt;remote_name&gt;</code></p>
<h3 id="变基">
  变基
  <a class="heading-link" href="#%e5%8f%98%e5%9f%ba">
    <i class="fa fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>使用 <code>rebase</code> 命令将提交到某一分支上的所有修改都移至另一分支上，就好像“重新播放”一样</p>
<p>据说<code>rebase</code>可以让提交历史更简洁，目前没看出来</p>
<p><code>rebase</code>的原则：只对尚未推送或分享给别人的本地修改执行变基操作清理历史，从不对已推送至别处的提交执行变基操作</p>

      </div>


      <footer>
        


        
        
        
        
        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
      2019 -
    
    2023
     ptrzs 
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
